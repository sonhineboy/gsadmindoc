(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{290:function(s,t,e){"use strict";e.r(t);var n=e(14),a=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h3",{attrs:{id:"代码生成"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#代码生成"}},[s._v("#")]),s._v(" 代码生成")]),s._v(" "),t("hr"),s._v(" "),t("h4",{attrs:{id:"说明"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#说明"}},[s._v("#")]),s._v(" 说明")]),s._v(" "),t("p",[s._v('为了让大家在开发的过程中更加专注业务本身，GS Admin在1.5+ 的版本里增加了"代码生成"，本功能可以自动生成前端代码（列表、添加、查看、编辑等界面）和后端代码（CRUD 标准接口），可以大量的节省一些重复工作量。')]),s._v(" "),t("h4",{attrs:{id:"方式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#方式"}},[s._v("#")]),s._v(" 方式")]),s._v(" "),t("p",[s._v('对于"代码生成"的使用也非常简单，主要分为两种：')]),s._v(" "),t("ol",[t("li",[t("p",[t("a",{attrs:{href:"#%E6%AD%A3%E5%90%91"}},[s._v("正向")]),s._v("的生成数据库、api、前端模版")])]),s._v(" "),t("li",[t("p",[t("a",{attrs:{href:"#%E5%8F%8D%E5%90%91"}},[s._v("反向")]),s._v("的生成api、前端模版，")])])]),s._v(" "),t("p",[s._v("下面分别来介绍下这两种方法的用法。")]),s._v(" "),t("ol",[t("li",[t("h4",{attrs:{id:"正向"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#正向"}},[s._v("#")]),s._v(" 正向")])])]),s._v(" "),t("blockquote",[t("p",[s._v("主要应用的场景为还没有创建数据库，一般为新的业务功能开发")])]),s._v(" "),t("p",[t("strong",[s._v("1.1 基本数据")]),s._v(" "),t("img",{attrs:{src:s.$withBase("/img/gen1.png"),width:"95%"}})]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("字段")]),s._v(" "),t("th",[s._v("说明")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("表名")]),s._v(" "),t("td",[s._v("对应数据库表名，命名方式下划线，比如：正确 user_member 错误UserName,userName。生成业务文件会把下划线转成小驼峰，比如：userMemberController.go")])]),s._v(" "),t("tr",[t("td",[s._v("控制器包明")]),s._v(" "),t("td",[s._v('golang 推荐包名的命名方法，包名会在 "controllers 目录"下产生不同的文件夹')])])])]),s._v(" "),t("p",[s._v("Checkbox 里面的选项可以根据自己的需求生成相应的代码功能。")]),s._v(" "),t("p",[t("strong",[s._v("1.2 表字段")])]),s._v(" "),t("img",{attrs:{src:s.$withBase("/img/gen2.png"),width:"95%"}}),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("字段")]),s._v(" "),t("th",[s._v("必填")]),s._v(" "),t("th",[s._v("说明")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("字段名")]),s._v(" "),t("td",[s._v("yes")]),s._v(" "),t("td",[s._v("下划线方式命名")])]),s._v(" "),t("tr",[t("td",[s._v("Json")]),s._v(" "),t("td",[s._v("yes")]),s._v(" "),t("td",[s._v("前端json 对象字段名称")])]),s._v(" "),t("tr",[t("td",[s._v("翻译")]),s._v(" "),t("td",[s._v("yes")]),s._v(" "),t("td",[s._v("表格列表显示名称")])]),s._v(" "),t("tr",[t("td",[s._v("类型")]),s._v(" "),t("td",[s._v("yes")]),s._v(" "),t("td",[s._v("对应数据库类型，其中image、file 为字符串类型")])]),s._v(" "),t("tr",[t("td",[s._v("索引")]),s._v(" "),t("td",[s._v("yes")]),s._v(" "),t("td",[s._v("对应数据库索引")])]),s._v(" "),t("tr",[t("td",[s._v("default")]),s._v(" "),t("td",[s._v("yes")]),s._v(" "),t("td",[s._v("对应数据库字符默认值")])]),s._v(" "),t("tr",[t("td",[s._v("描述")]),s._v(" "),t("td",[s._v("yes")]),s._v(" "),t("td",[s._v("对应数据库字段 comment")])])])]),s._v(" "),t("blockquote",[t("p",[s._v("不用添加id created_at updated_at deleted_at 这个三个字段，系统会自动生成。")])]),s._v(" "),t("p",[t("strong",[s._v("1.3 生成对应代码")]),s._v(" "),t("img",{attrs:{src:s.$withBase("/img/gen3.png"),width:"95%"}})]),s._v(" "),t("p",[s._v('把所有的字段填写完成后，点击"生成代码"按钮，生成代码结构如下')]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("#service 根目录\n┌── app\n├──── controllers\n├────── genExample          # 包名\n├──────── newsController.go #控制器\n├── models\n├──── news.go               #gorm 数据库模型\n├── repositorys\n├──── newsRepository.go\n├── requests\n├──── newsRequest.go\n├── web                     #前端代码生成位置\n├──── js\n├────── model               #默认和前端目录路径相同\n├──────── new.js\n├──── view\n├────── news\n├──────── form.vue\n└──────── index.vue\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br")])]),t("p",[t("strong",[s._v("1.4 后端添加路由")]),s._v(" "),t("b",{staticStyle:{color:"red"}},[s._v("(v.1.5.2+已经不需要此操作)")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('    //gen_news\n\tNews := r.Group("/news")\n\t{\n\t\tvar NewsController genExample.NewsController\n        //列表\n\t\tNews.GET("/index", NewsController.Index)\n        //添加\n\t\tNews.POST("/save", NewsController.Save)\n        //删除\n\t\tNews.POST("/delete", NewsController.Delete)\n        //获取单条\n\t\tNews.GET("/:id", NewsController.Get)\n        //更新\n\t\tNews.POST("/edit/:id", NewsController.Edit)\n\t}\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br")])]),t("p",[s._v("按照以上路由规则，添加到路由的注册位置")]),s._v(" "),t("p",[t("strong",[s._v("1.5 移动前端模板")]),s._v(" "),t("b",{staticStyle:{color:"red"}},[s._v("(v.1.5.2+已经不需要此操作)")])]),s._v(" "),t("ul",[t("li",[t("p",[s._v("1.5.1 前端 model/new.js 移动到对应前端文件src/api/model目录下面")])]),s._v(" "),t("li",[t("p",[s._v("1.5.2 前端 view/news 目录移动到对应前端文件src/view 目录下")])])]),s._v(" "),t("p",[t("strong",[s._v("1.6 添加菜单")]),s._v(" "),t("b",{staticStyle:{color:"red"}},[s._v("(v.1.5.2+已经不需要此操作)")])]),s._v(" "),t("p",[s._v("忽略")]),s._v(" "),t("p",[t("strong",[s._v("1.7 AutoMigrate")]),s._v(" "),t("b",{staticStyle:{color:"red"}},[s._v("(v.1.5.2+已经不需要此操作)")])]),s._v(" "),t("p",[s._v("如果是正向生成（数据没有表的情况下），在main.go 文件里添加 数据模型 自动生成数据表")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('amErr := global.Db.Set("gorm:table_options", "ENGINE=InnoDB").AutoMigrate(\n\t...,\n\t\t&models.News{},\n\t)\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("blockquote",[t("p",[s._v("重启后就可以看到效果了。")])]),s._v(" "),t("ol",{attrs:{start:"2"}},[t("li",[t("h4",{attrs:{id:"反向"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#反向"}},[s._v("#")]),s._v(" 反向")])])]),s._v(" "),t("blockquote",[t("p",[s._v("反向生成和正向步骤基本相同，主要使用场景是对已经存在的数据表生成前、后端代码。")])]),s._v(" "),t("p",[t("strong",[s._v("2.1 基本数据")])]),s._v(" "),t("ol",[t("li",[s._v("点击已有数据库")])]),s._v(" "),t("img",{attrs:{src:s.$withBase("/img/gen4.png"),width:"95%"}}),s._v(" "),t("ol",{attrs:{start:"2"}},[t("li",[s._v('点击"生成字段"\n'),t("img",{attrs:{src:s.$withBase("/img/gen5.png"),width:"95%"}})])]),s._v(" "),t("p",[t("strong",[s._v("2.2 完善字段信息")])]),s._v(" "),t("p",[s._v("按照正向生成方式的 1.2 步骤 完善生成的字段信息。")]),s._v(" "),t("blockquote",[t("p",[s._v('完成以上步骤后，可按照" 正向"的1.3~1.7步骤完成以后得工作即可。')])])])}),[],!1,null,null,null);t.default=a.exports}}]);